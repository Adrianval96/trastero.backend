runtime: python312

# Add Cloud SQL Proxy handler
handlers:
- url: /cloudsql
  script: auto

entrypoint: gunicorn -b :$PORT trastero.wsgi
beta_settings:
  cloud_sql_instances: trastero-postgres
env_variables:
  DJANGO_ENV: 'production'
  DB_HOST: ${{ secrets.DB_PUBLIC_HOST }}
  DB_NAME: ${{ secrets.DB_NAME }}
  DB_USER: ${{ secrets.DB_USER }}
  DB_PASSWORD: ${{ secrets.DB_PASSWORD }}